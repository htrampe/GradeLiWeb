<div class="panel panel-default">
  <div class="panel-heading">

  <h3><b>Schüler in {{classname}} </b><small ng-if="studentcount > 0">{{studentcount}} Schüler</small>
  
  <div style="margin-top: -10px; float: right"><button class="btn btn-primary" title="Neue Stunden erstellen" ng-click="toClassView()">Zurück</button></div>
  </div></h3>
  <div class="panel-group">
  <div class="panel-body">
  
  <div ng-if="studentcount == 0" class="alert alert-warning"><b>Keine Schüler angelegt.</b></div>

   <table ng-if="studentcount > 0 "  class="table table-striped table-bordered table-responsive">
    <tr style="background-color: #337AB7; color: #ffffff">
      <td><b>Nr.</b></td><td></td><td><b>Vorname</b></td><td><b>Name</b></td>
      <td>UE</td><td >E</td><td >S</td><td >--</td><td >-<td >o</td><td >+</td><td >++</td><td ><span class="glyphicon glyphicon-time"></span></td>
      <td>S</td>
      <td>M</td>
      <td>FI</td>
    </tr>
    <tr ng-repeat="student in studentsdata track by $index">    
      <td>{{$index+1}}.</td>
      <td>
        <img ng-if="student.img == '' || student.img == NULL" src="stuimg/holder.png" width="75px" height="75px"/>
        <img ng-if="student.img != '' && student.img != NULL" src="stuimg/{{student.img}}" width="75px" height="75px"/>       
      </td>
      <td><a ui-sref="logged.singlestu({studentid: student.id})">{{student.prename}}</a></td>
      <td><a ui-sref="logged.singlestu({studentid: student.id})">{{student.name}}</a></td>     
      <td ng-if="student.ue.count > 0" style="color: red">{{student.ue.count}}</td>
      <td ng-if="student.ue.count == 0">{{student.ue.count}}</td>  
      <td>{{student.e.count}}</td> 
      <td>{{student.se.count}}</td> 
      <td>{{student.mm}}</td> 
      <td>{{student.m}}</td> 
      <td>{{student.o}}</td> 
      <td>{{student.p}}</td> 
      <td>{{student.pp}}</td> 
      <td>{{student.time}}</td> 
      <td><b>{{student.noten_final.written_nf}}</b></td>
      <td><b>{{student.noten_final.mouth_nf}}</b></td>
      <td style="font-size: 1.2em"><b>{{student.noten_final.nf}}</b></td>
    </tr>
  </table>
    <!-- BUTTONS -->
    <div style="float: right"><button class="btn btn-primary" title="Neue Stunden erstellen" ng-click="toClassView()">Zurück</button></div>
    <br />
    <hr>
    
      <table>
        <tr>
          <td><button class="btn btn-primary" title="Neue Stunden erstellen" ng-click="newStudent()">Neuen Schüler anlegen</button></td>
        </tr>
        <tr>
          <td><input type="file" class="btn btn-success" id="csv_file" accept="*.csv"></td>
          <td><button ng-click="submitCSV()" class="btn btn-success">Senden</button></td>
        </tr>        
      </table>    
      <h4>
      &nbsp;Die CSV-Datei muss in der ersten Zeile "Vorname" und "Name" enthalten.<br /><br />
      &nbsp;<a href="core/assets/gradeliweb_csv_Vorlage.csv" target="_blank" >Eine Vorlage kann hier heruntergeladen werden</a> (Rechtsklick "Speichern unter" oder "Link speichern unter").</h4>
      <b>&nbsp;Prüfsumme: bc375790d7af44f26d2ab1134d9f7b9a - Bitte nach Download mit md5sum prüfen, um böswillige Manipulationen zu vermeiden.</b>
  </div>
  </div>  

  </div>
</div>  

<!-- New Student Mod -->
<div id="newstudent" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">              
        <h4 class="modal-title">Neuen Schüler erstellen</h4>
      </div>
      <div class="modal-body">      
      <table>       
        <tr>
          <td>Vorname:&nbsp;</td><td><input type="text" placeholder="Vorname eintragen" class="form-control" size="20" id="prename"/></td>
          <td>Nachname:&nbsp;</td><td><input placeholder="Nachnamen eintragen" type="text" class="form-control" size="20" id="name"></td>
        </tr>        
      </table>       
      <div id="inputerr" class="alert alert-danger">{{errmess}}</div>
      <br />      
      <div style="float: left;">      
    <button type="button" class="btn btn-default" data-dismiss="modal">Abbrechen</button>&nbsp;       
      <button type="button" class="btn btn-primary" ng-click="saveNewStudent()">Schüler speichern</button></div>
      <br /><br />
      </div>      
    </div>
  </div>
</div>


<!-- MODAL FOR CSV-->
<div id="csvmod" class="modal fade"  data-backdrop="static" data-keyboard="false" >
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- dialog body -->
      <div class="modal-body">        
        <h3>Verarbeitung läuft. Bitte warten.</h3>
        <div class="progress">
        <div class="progress-bar progress-bar-striped active" role="progressbar"
        aria-valuenow="{{progvalue}}" aria-valuemin="0" aria-valuemax="100" style="width:{{progvalue}}%">
          {{csvmess}}
        </div>
      </div>
      </div>            
    </div>
  </div>
</div>